

ambient fun sample() : double

fun random_sampler(action) {
  handle(action) {
    return x -> x
    sample() -> random()
  }
  /* with fun sample() { random() } */
  /* action  // mask out `ndet` from the `action` effect */
}
